<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorate="~{layout.html}">
<head>
 <link rel="stylesheet" href="/css/myPagination.css" type="text/css"/>
 <script type="text/javascript" src="/js/myPagination.js"></script>
  <style>
   table tbody {
        display: block;
        height: 320px;
        overflow-y: scroll;
    }
    
    table thead, tbody tr {
        display: table;
        width:100%;
        table-layout: fixed;
    }
   table thead {
        width: calc( 100% - 18px);
    }
 </style>
</head>
<div class="margin clearfix" layout:fragment="content" seq="23">
<script type="text/javascript">
	var $curs = {};
	$(function(){
	    var param={};
		query(param);
	});
	function query(params){
		$curs = params;
		$('#myPage').html('');
		$.ajax({
			   type: "GET",
			   url: '/product/productAttrList',
			   data:params,
			   dataType:'json',
			   success: function(result){
				   $('#myData').empty();
				   var template = Handlebars.compile($("#roleTemplate").html());
				   var $tr = template(result.data);
				   $('#myData').append($tr);
				   new Page({
				        id: 'pagination',
				        pageTotal: result.data.total, //必填,总页数
				        pageAmount: result.data.size,  //每页多少条
				        dataTotal: result.data.total, //总共多少条数据
				        curPage:result.data.current, //初始页码,不填默认为1
				        pageSize:result.data.pages, //分页个数,不填默认为5
				        showPageTotalFlag:true, //是否显示数据统计,不填默认不显示
				        showSkipInputFlag:true, //是否支持跳转,不填默认不显示
				        getPage: function (page) {
				        	$curs.pageNo = page;
				    		query($curs);
				        }
				    })
			   }
		});
	}
	
	function jumpPage(page){
		$curs.pageNo = page;
		query($curs);
	}
	function startQuery(){
		var pArray = $('#searchForm').serializeArray();
		var params = {};
		for(var i = 0;i < pArray.length;i++){
			if($.trim(pArray[i].value) != ''){
				params[pArray[i].name] = pArray[i].value;
			}
		}
		query(params);
	}
 </script>
 <div class="search_style">
       <form id="searchForm">
       <ul class="search_content clearfix">
       <li><label class="l_f">名称</label><input name="userName" type="text" class="text_add" placeholder="用户名" style=" width:150px"></li>
       <li style="width:90px;"><button type="button" class="btn btn-info" onclick="startQuery()"><i class="fa fa-search"></i>查询</button></li>
       <li style="width:90px;"><button type="button" class="btn btn-warning" onclick="toIndex(0)"><i class="fa fa-plus"></i>新增</button></li>
      </ul>
      </form>
    </div>
<div class="Columns_style margin">
  <table class="table table-striped table-bordered table-hover" id="sample-table">
       <thead>
		 <tr>
				<th width="50px">编号</th>
				<th width="50px">分类</th>
				<th width="50px">名称</th>
				<th width="50px">是否自定义</th>
				<th width="50px">创建时间</th>
				<th width="50px">创建人</th>
				<th width="50px">操作</th>                
			</tr>
		</thead>
        <tbody id="myData">
        </tbody>
   </table>
</div>
 <div id="pagination" class="pagination"></div>
 
 <div class="modal fade" id="myModal"  aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" >
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">模态框（Modal）标题</h4>
            </div>
            <div class="modal-body">在这里添加一些文本</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">提交更改</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
    </div>
	<!-- /.page-content-area -->
<script id="roleTemplate" type="text/x-handlebars-template">
{{#each records}}
<tr>
 <td width="50px">{{addOne   @index }}</td>    
 <td width="50px">{{categoryId}}</td>             
 <td width="50px"><u style="cursor:pointer" class="text-primary" onclick="">{{name}}</u></td>
 <td width="50px">{{customTag}}</td>    
 <td width="50px">{{createTime}}</td>  
 <td width="50px">{{createUser}}</td>   
 <td width="50px"><a href="#" data-toggle="modal" data-target="#myModal">详情</a><a href="#">新增</a></td>  
 </tr>
{{/each}}
 </script>	
</div>
</html>